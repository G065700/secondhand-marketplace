### 개요

이 문서는 중고 물품 거래를 위한 풀스택 Next.js 애플리케이션의 화면 구성을 정의합니다. 사용자는 물품을 구매 및 판매하고, 프로필을 관리하며, 다른 사용자와 채팅할 수 있습니다. 관리자는 사용자 및 상품을 관리할 수 있습니다.

### 공통 요소

애플리케이션의 모든 화면에 공통적으로 적용되는 요소는 다음과 같습니다.

*   **레이아웃 (`src/app/(pages)/layout.tsx`):**
    *   **목적:** 애플리케이션의 기본 HTML 구조, 전역 스타일, 폰트 설정을 제공하고, 사용자 세션 정보를 기반으로 `ClientProviders`를 통해 전역적인 컨텍스트(예: NextAuth 세션, 토스트 알림)를 주입합니다.
    *   **주요 구성 요소:** `<html>`, `<body>` 태그, `ClientProviders` 컴포넌트.
    *   **데이터:** `getCurrentUser()` 함수를 통해 현재 로그인된 사용자 정보를 비동기적으로 가져옵니다.
*   **내비게이션 바 (`src/components/shared/nav/Navbar.tsx`):**
    *   **목적:** 애플리케이션의 주요 페이지로 이동할 수 있는 링크를 제공하고, 사용자 로그인 상태에 따라 다른 UI를 보여줍니다.
    *   **주요 구성 요소:**
        *   로고 (`SecondHandLogo`): 클릭 시 메인 페이지로 이동.
        *   내비게이션 아이템 (`NavItem`): 주요 메뉴 링크 (예: 상품 업로드, 채팅, 내 정보).
        *   사용자 메뉴 (`NavUser`, `My` 드롭다운): 로그인된 사용자에게 프로필 이미지, 이름, 관리자 메뉴 등을 제공.
        *   로그인 버튼: 로그인되지 않은 사용자에게 로그인 기능을 제공.
        *   모바일 메뉴 버튼: 작은 화면에서 내비게이션 아이템을 토글.
    *   **사용자 상호작용:** 메뉴 클릭, 로그인/로그아웃, 사용자 메뉴 드롭다운.
    *   **데이터:** `currentUser` prop을 통해 현재 로그인된 사용자 정보를 받습니다.

---

### 화면 목록

#### 1. 메인 페이지 (홈)

*   **화면명:** 메인 페이지
*   **URL 경로:** `/`
*   **목적:** 최신 상품 목록을 보여주고, 사용자가 상품을 검색하거나 카테고리별로 필터링할 수 있도록 합니다.
*   **주요 구성 요소:**
    *   **상품 목록:** `ProductCard` 컴포넌트들로 구성된 그리드 형태의 상품 목록.
    *   **검색 및 필터링:** 상품 검색 입력 필드, 카테고리 필터.
    *   **페이지네이션:** 상품 목록을 페이지별로 탐색할 수 있는 컨트롤.
*   **사용자 상호작용:**
    *   상품 클릭 시 상품 상세 페이지로 이동.
    *   검색어 입력 및 검색.
    *   카테고리 선택.
    *   페이지네이션 컨트롤 클릭.
*   **데이터 흐름:** `getProducts` 액션을 통해 상품 목록을 가져오고, `getCategories` 액션을 통해 카테고리 목록을 가져옵니다.

#### 2. 상품 상세 페이지

*   **화면명:** 상품 상세 페이지
*   **URL 경로:** `/products/[productId]`
*   **목적:** 특정 상품의 상세 정보(제목, 설명, 이미지, 가격, 판매자 정보 등)를 보여주고, 판매자와 채팅하거나 상품을 찜할 수 있는 기능을 제공합니다.
*   **주요 구성 요소:**
    *   상품 이미지 갤러리.
    *   상품 제목, 설명, 가격.
    *   판매자 정보 (아바타, 이름).
    *   카카오 지도 (상품 위치 표시).
    *   찜하기 버튼.
    *   채팅하기 버튼.
*   **사용자 상호작용:**
    *   찜하기/찜 해제.
    *   판매자와 채팅 시작.
    *   판매자 프로필 보기 (추정).
*   **데이터 흐름:** `getProductById` 액션을 통해 특정 상품 정보를 가져오고, `getCurrentUser` 액션을 통해 현재 사용자 정보를 가져옵니다.

#### 3. 상품 업로드 페이지

*   **화면명:** 상품 업로드 페이지
*   **URL 경로:** `/products/upload`
*   **목적:** 사용자가 새로운 상품을 등록할 수 있도록 합니다.
*   **주요 구성 요소:**
    *   상품 이미지 업로드 필드 (`ImageUpload`).
    *   상품 제목, 설명, 가격 입력 필드.
    *   카테고리 선택 드롭다운.
    *   카카오 지도 (상품 위치 설정).
    *   등록 버튼.
*   **사용자 상호작용:**
    *   이미지 업로드.
    *   각 필드에 정보 입력.
    *   지도에서 위치 선택.
    *   등록 버튼 클릭.
*   **데이터 흐름:** `getCategories` 액션을 통해 카테고리 목록을 가져옵니다. 폼 제출 시 API 라우트 (`/api/products`)로 데이터 전송.

#### 4. 상품 수정 페이지

*   **화면명:** 상품 수정 페이지
*   **URL 경로:** `/products/update/[productId]`
*   **목적:** 기존에 등록된 상품의 정보를 수정할 수 있도록 합니다.
*   **주요 구성 요소:**
    *   상품 업로드 페이지와 유사한 폼 필드.
    *   기존 상품 정보가 미리 채워져 있습니다.
    *   수정 완료 버튼.
*   **사용자 상호작용:**
    *   각 필드의 정보 수정.
    *   수정 완료 버튼 클릭.
*   **데이터 흐름:** `getProductById` 액션을 통해 기존 상품 정보를 가져옵니다. 폼 제출 시 API 라우트 (`/api/products/[productId]`)로 데이터 전송.

#### 5. 채팅 페이지

*   **화면명:** 채팅 페이지
*   **URL 경로:** `/chat`
*   **목적:** 사용자가 다른 사용자와 실시간으로 메시지를 주고받을 수 있도록 합니다.
*   **주요 구성 요소:**
    *   대화 목록 (왼쪽 패널): 현재 참여 중인 대화 목록.
    *   메시지 창 (오른쪽 패널): 선택된 대화의 메시지 내역 및 메시지 입력 필드.
    *   메시지 컴포넌트 (`Message.tsx`): 보낸 메시지와 받은 메시지를 구분하여 표시.
*   **사용자 상호작용:**
    *   대화 목록에서 대화 선택.
    *   메시지 입력 및 전송.
    *   이미지 전송 (추정).
*   **데이터 흐름:** `getConversations` 액션을 통해 대화 목록을 가져오고, `getMessages` 액션을 통해 특정 대화의 메시지를 가져옵니다. 메시지 전송 시 API 라우트 (`/api/chat`)로 데이터 전송.

#### 6. 내 정보 페이지

*   **화면명:** 내 정보 페이지
*   **URL 경로:** `/my`
*   **목적:** 현재 로그인된 사용자의 프로필 정보, 찜한 상품, 판매/구매 내역 등을 보여줍니다.
*   **주요 구성 요소:**
    *   사용자 프로필 정보 (이름, 이메일, 프로필 이미지).
    *   탭 또는 섹션: 찜한 상품, 판매 내역, 구매 내역 등.
*   **사용자 상호작용:**
    *   프로필 정보 수정 (추정).
    *   각 탭/섹션 이동.
*   **데이터 흐름:** `getCurrentUser` 액션을 통해 현재 사용자 정보를 가져오고, `getFavoriteProducts`, `getProductsByUserId` 등의 액션을 통해 관련 데이터를 가져옵니다.

#### 7. 활동 내역 페이지

*   **화면명:** 활동 내역 페이지
*   **URL 경로:** `/histories`
*   **목적:** 사용자의 과거 활동 내역(예: 조회한 상품, 구매/판매 기록)을 보여줍니다.
*   **주요 구성 요소:**
    *   활동 내역 목록.
*   **사용자 상호작용:**
    *   내역 클릭 시 관련 상세 페이지로 이동 (추정).
*   **데이터 흐름:** `getHistories`와 같은 액션을 통해 활동 내역 데이터를 가져옵니다.

#### 8. 로그인 페이지

*   **화면명:** 로그인 페이지
*   **URL 경로:** `/auth/sign-in`
*   **목적:** 사용자가 계정에 로그인할 수 있도록 합니다.
*   **주요 구성 요소:**
    *   이메일 및 비밀번호 입력 필드.
    *   로그인 버튼.
    *   소셜 로그인 버튼 (Google).
    *   회원가입 페이지로 이동하는 링크.
*   **사용자 상호작용:**
    *   이메일 및 비밀번호 입력 후 로그인.
    *   Google 계정으로 로그인.
    *   회원가입 링크 클릭.
*   **데이터 흐름:** NextAuth.js의 `signIn` 함수를 통해 인증 처리.

#### 9. 회원가입 페이지

*   **화면명:** 회원가입 페이지
*   **URL 경로:** `/auth/sign-up`
*   **목적:** 새로운 사용자가 계정을 생성할 수 있도록 합니다.
*   **주요 구성 요소:**
    *   이름, 이메일, 비밀번호 입력 필드.
    *   회원가입 버튼.
    *   로그인 페이지로 이동하는 링크.
*   **사용자 상호작용:**
    *   각 필드에 정보 입력 후 회원가입.
    *   로그인 링크 클릭.
*   **데이터 흐름:** API 라우트 (`/api/sign-up`)로 사용자 정보 전송.

#### 10. 관리자 - 카테고리 관리 페이지

*   **화면명:** 관리자 - 카테고리 관리
*   **URL 경로:** `/admin/categories`
*   **목적:** 관리자가 상품 카테고리를 추가, 수정, 삭제할 수 있도록 합니다.
*   **주요 구성 요소:**
    *   카테고리 목록.
    *   카테고리 추가/수정 폼.
*   **사용자 상호작용:**
    *   새 카테고리 추가.
    *   기존 카테고리 수정/삭제.
*   **데이터 흐름:** `getCategories` 액션을 통해 카테고리 목록을 가져오고, API 라우트 (`/api/admin/categories`)를 통해 카테고리 관리.

#### 11. 관리자 - 상품 관리 페이지

*   **화면명:** 관리자 - 상품 관리
*   **URL 경로:** `/admin/products`
*   **목적:** 관리자가 등록된 모든 상품을 조회하고, 상품 상태(예: 판매 완료, 정지)를 변경하거나 삭제할 수 있도록 합니다.
*   **주요 구성 요소:**
    *   상품 목록 (테이블 형태).
    *   상품 검색 및 필터링.
    *   상품 상태 변경 컨트롤.
*   **사용자 상호작용:**
    *   상품 검색 및 필터링.
    *   상품 상세 보기 (클릭 시 `admin/products/[productId]`로 이동).
    *   상품 상태 변경.
    *   상품 삭제.
*   **데이터 흐름:** `getProducts` 액션을 통해 상품 목록을 가져오고, API 라우트 (`/api/admin/products`)를 통해 상품 관리.

#### 12. 관리자 - 상품 상세 관리 페이지

*   **화면명:** 관리자 - 상품 상세 관리
*   **URL 경로:** `/admin/products/[productId]`
*   **목적:** 관리자가 특정 상품의 상세 정보를 조회하고, 수정하거나 상태를 변경할 수 있도록 합니다.
*   **주요 구성 요소:**
    *   상품 상세 정보 표시.
    *   상품 수정 폼 (상품 수정 페이지와 유사).
    *   상품 상태 변경 옵션.
*   **사용자 상호작용:**
    *   상품 정보 수정.
    *   상품 상태 변경.
    *   상품 삭제.
*   **데이터 흐름:** `getProductById` 액션을 통해 상품 정보를 가져오고, API 라우트 (`/api/admin/products/[productId]`)를 통해 상품 관리.

#### 13. 관리자 - 사용자 관리 페이지

*   **화면명:** 관리자 - 사용자 관리
*   **URL 경로:** `/admin/users`
*   **목적:** 관리자가 모든 사용자 계정을 조회하고, 사용자 상태(예: 활성화/비활성화, 관리자 권한 부여)를 변경하거나 삭제할 수 있도록 합니다.
*   **주요 구성 요소:**
    *   사용자 목록 (테이블 형태).
    *   사용자 검색 및 필터링.
    *   사용자 상태 변경 컨트롤.
*   **사용자 상호작용:**
    *   사용자 검색 및 필터링.
    *   사용자 상세 보기 (클릭 시 `admin/users/[userId]`로 이동).
    *   사용자 상태 변경.
    *   사용자 삭제.
*   **데이터 흐름:** `getUsers` 액션을 통해 사용자 목록을 가져오고, API 라우트 (`/api/admin/users`)를 통해 사용자 관리.

#### 14. 관리자 - 사용자 상세 관리 페이지

*   **화면명:** 관리자 - 사용자 상세 관리
*   **URL 경로:** `/admin/users/[userId]`
*   **목적:** 관리자가 특정 사용자의 상세 정보를 조회하고, 수정하거나 권한을 변경할 수 있도록 합니다.
*   **주요 구성 요소:**
    *   사용자 상세 정보 표시.
    *   사용자 정보 수정 폼.
    *   사용자 권한 변경 옵션.
*   **사용자 상호작용:**
    *   사용자 정보 수정.
    *   사용자 권한 변경.
    *   사용자 삭제.
*   **데이터 흐름:** `getUserById` 액션을 통해 사용자 정보를 가져오고, API 라우트 (`/api/admin/users/[userId]`)를 통해 사용자 관리.

---

이 화면정의서는 코드 분석과 제공된 URL을 기반으로 작성되었습니다. 실제 UI/UX와 약간의 차이가 있을 수 있습니다.